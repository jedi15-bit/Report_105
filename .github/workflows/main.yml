name: AL CI

on:
  push:
    branches: [ "main" ]
  pull_request:
    branches: [ "main" ]

jobs:
  build:
    name: Build
    runs-on: windows-latest

    steps:
    - name: Checkout
      uses: actions/checkout@v4

    - name: Build AL Project
      shell: pwsh
      run: |
        Invoke-WebRequest https://raw.githubusercontent.com/microsoft/AL-Go/main/scripts/Run-AlPipeline.ps1 -OutFile Run-AlPipeline.ps1
        .\Run-AlPipeline.ps1 `
          -type Build `
          -countryCode W1 `
          -doNotPublishApps `
          -installApps `
          -installTestApps
